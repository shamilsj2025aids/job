<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simple Job Portal</title>

<!-- SIMPLE CSS -->
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    padding: 20px;
  }
  .container {
    max-width: 700px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  h1, h2 {
    text-align: center;
  }
  input, textarea {
    width: 100%;
    padding: 10px;
    margin-top: 8px;
    border: 1px solid #ccc;
    border-radius: 6px;
  }
  button {
    width: 100%;
    padding: 12px;
    background: #007bff;
    color: white;
    border: none;
    margin-top: 10px;
    border-radius: 6px;
    cursor: pointer;
  }
  button:hover {
    background: #0056b3;
  }
  .job-card {
    background: #eef2ff;
    padding: 15px;
    border-radius: 6px;
    margin-top: 12px;
    border-left: 5px solid #007bff;
  }
  .delete-btn {
    background: #ff4d4d;
    margin-top: 10px;
  }
</style>

</head>
<body>

<div class="container">
  <h1>Job Portal</h1>

  <h2>Add Job</h2>
  <input id="title" type="text" placeholder="Job Title">
  <input id="company" type="text" placeholder="Company Name">
  <textarea id="description" placeholder="Job Description"></textarea>
  <button onclick="addJob()">Add Job</button>

  <h2>Available Jobs</h2>
  <div id="jobs"></div>
</div>

<!-- JAVASCRIPT -->
<script>
const API_URL = "http://localhost:3000/jobs";

// Load jobs from server
async function loadJobs() {
  const res = await fetch(API_URL);
  const jobs = await res.json();

  const container = document.getElementById("jobs");
  container.innerHTML = "";

  jobs.forEach(job => {
    const div = document.createElement("div");
    div.className = "job-card";
    div.innerHTML = `
      <h3>${job.title}</h3>
      <p><b>Company:</b> ${job.company}</p>
      <p>${job.description}</p>
      <button class="delete-btn" onclick="deleteJob('${job.id}')">Delete</button>
    `;
    container.appendChild(div);
  });
}

// Add job to server
async function addJob() {
  const title = document.getElementById("title").value;
  const company = document.getElementById("company").value;
  const description = document.getElementById("description").value;

  if (!title || !company) {
    alert("Title & Company are required!");
    return;
  }

  await fetch(API_URL, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ title, company, description })
  });

  loadJobs();
}

// Delete job
async function deleteJob(id) {
  await fetch(`${API_URL}/${id}`, { method: "DELETE" });
  loadJobs();
}

// Initial load
loadJobs();
</script>

</body>
</html>
